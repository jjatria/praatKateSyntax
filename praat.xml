<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE language SYSTEM "language.dtd"
[
  <!ENTITY B '([^a-zA-Z0-9\._"&apos;]|$|^)'>
]>
<!--
  Prat syntax highlighting for Kate (and derivatives)
  v.0.16
  Author: Jose Joaquin Atria (j.atria.11@ucl.ac.uk)

  =Bugs=
  - Lines continuing from the previous via initial ldots (...) are not
    taken into account.

This language definition is free software: you can redistribute it
and/or modify it under the terms of the GNU General Public License
as published by the Free Software Foundation, either version 3 of
the License, or (at your option) any later version.

You should have received a copy of the GNU General Public License
along with file; see the file COPYING. If not, write to
the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor,
Boston, MA 02110-1301, USA.

A copy of the GNU General Public License is also available at
<http://www.gnu.org/licenses/>.
-->
<language name="Praat" version="0.16" kateversion="2.4" section="Scripts" extensions="*.Praat;*.praat;*.psc;*.praat-script;*.praatscript;*.proc" author="Jose JoaquÃ­n Atria (j.atria.11@ucl.ac.uk)" license="LGPL">
  <highlighting>
    <list name="keywords">
      <item>assert</item>
      <item>clearinfo</item>
      <item>demo</item>
      <item>elif</item>
      <item>else</item>
      <item>elsif</item>
      <item>from</item>
      <item>minus</item>
      <item>nocheck</item>
      <item>noprogress</item>
      <item>nowarn</item>
      <item>plus</item>
      <item>select</item>
      <item>stopwatch</item>
      <item>then</item>
      <item>to</item>
    </list>
    <list name="functions_string">
      <item>backslashTrigraphsToUnicode$</item>
      <item>chooseDirectory$</item>
      <item>chooseReadFile$</item>
      <item>chooseWriteFile$</item>
      <item>date$</item>
      <item>demoKey$</item>
      <item>do$</item>
      <item>environment$</item>
      <item>extractLine$</item>
      <item>extractWord$</item>
      <item>fixed$</item>
      <item>info$</item>
      <item>left$</item>
      <item>mid$</item>
      <item>percent$</item>
      <item>readFile$</item>
      <item>replace$</item>
      <item>replace_regex$</item>
      <item>right$</item>
      <item>selected$</item>
      <item>string$</item>
    </list>
    <list name="functions_numeric">
      <item>abs</item>
      <item>appendFile</item>
      <item>appendFileLine</item>
      <item>appendInfo</item>
      <item>appendInfoLine</item>
      <item>arccos</item>
      <item>arccosh</item>
      <item>arcsin</item>
      <item>arcsinh</item>
      <item>arctan</item>
      <item>arctan2</item>
      <item>arctanh</item>
      <item>barkToHertz</item>
      <item>beginPause</item>
      <item>beginSendPraat</item>
      <item>besselI</item>
      <item>besselK</item>
      <item>beta</item>
      <item>beta2</item>
      <item>binomialP</item>
      <item>binomialQ</item>
      <item>boolean</item>
      <item>ceiling</item>
      <item>chiSquareP</item>
      <item>chiSquareQ</item>
      <item>choice</item>
      <item>comment</item>
      <item>cos</item>
      <item>cosh</item>
      <item>createDirectory</item>
      <item>deleteFile</item>
      <item>demoClicked</item>
      <item>demoClickedIn</item>
      <item>demoCommandKeyPressed</item>
      <item>demoExtraControlKeyPressed</item>
      <item>demoInput</item>
      <item>demoKeyPressed</item>
      <item>demoOptionKeyPressed</item>
      <item>demoShiftKeyPressed</item>
      <item>demoShow</item>
      <item>demoWaitForInput</item>
      <item>demoWindowTitle</item>
      <item>demoX</item>
      <item>demoY</item>
      <item>differenceLimensToPhon</item>
      <item>do</item>
      <item>editor</item>
      <item>endPause</item>
      <item>endSendPraat</item>
      <item>endsWith</item>
      <item>erb</item>
      <item>erbToHertz</item>
      <item>erf</item>
      <item>erfc</item>
      <item>exitScript</item>
      <item>exp</item>
      <item>extractNumber</item>
      <item>fileReadable</item>
      <item>fisherP</item>
      <item>fisherQ</item>
      <item>floor</item>
      <item>gaussP</item>
      <item>gaussQ</item>
      <item>hertzToBark</item>
      <item>hertzToErb</item>
      <item>hertzToMel</item>
      <item>hertzToSemitones</item>
      <item>imax</item>
      <item>imin</item>
      <item>incompleteBeta</item>
      <item>incompleteGammaP</item>
      <item>index</item>
      <item>index_regex</item>
      <item>invBinomialP</item>
      <item>invBinomialQ</item>
      <item>invChiSquareQ</item>
      <item>invFisherQ</item>
      <item>invGaussQ</item>
      <item>invSigmoid</item>
      <item>invStudentQ</item>
      <item>length</item>
      <item>ln</item>
      <item>lnBeta</item>
      <item>lnGamma</item>
      <item>log10</item>
      <item>log2</item>
      <item>max</item>
      <item>melToHertz</item>
      <item>min</item>
      <item>minusObject</item>
      <item>natural</item>
      <item>number</item>
      <item>numberOfColumns</item>
      <item>numberOfRows</item>
      <item>numberOfSelected</item>
      <item>objectsAreIdentical</item>
      <item>option</item>
      <item>optionMenu</item>
      <item>pauseScript</item>
      <item>phonToDifferenceLimens</item>
      <item>plusObject</item>
      <item>positive</item>
      <item>randomBinomial</item>
      <item>randomGauss</item>
      <item>randomInteger</item>
      <item>randomPoisson</item>
      <item>randomUniform</item>
      <item>real</item>
      <item>readFile</item>
      <item>removeObject</item>
      <item>rindex</item>
      <item>rindex_regex</item>
      <item>round</item>
      <item>runScript</item>
      <item>runSystem</item>
      <item>runSystem_nocheck</item>
      <item>selectObject</item>
      <item>selected</item>
      <item>semitonesToHertz</item>
      <item>sentencetext</item>
      <item>sigmoid</item>
      <item>sin</item>
      <item>sinc</item>
      <item>sincpi</item>
      <item>sinh</item>
      <item>soundPressureToPhon</item>
      <item>sqrt</item>
      <item>startsWith</item>
      <item>studentP</item>
      <item>studentQ</item>
      <item>tan</item>
      <item>tanh</item>
      <item>variableExists</item>
      <item>word</item>
      <item>writeFile</item>
      <item>writeFileLine</item>
      <item>writeInfo</item>
      <item>writeInfoLine</item>
  </list>
    <list name="functions_array">
      <item>linear#</item>
      <item>randomGauss#</item>
      <item>randomInteger#</item>
      <item>randomUniform#</item>
      <item>zero#</item>
    </list>
    <list name="variables_numeric">
      <item>macintosh</item>
      <item>windows</item>
      <item>unix</item>
      <item>praatVersion</item>
      <item>pi</item>
      <item>e</item>
      <item>undefined</item>
   </list>
    <list name="variables_string">
      <item>praatVersion$</item>
      <item>tab$</item>
      <item>shellDirectory$</item>
      <item>homeDirectory$</item>
      <item>preferencesDirectory$</item>
      <item>newline$</item>
      <item>temporaryDirectory$</item>
      <item>defaultDirectory$</item>
    </list>
    <contexts>
      <context name="Normal" attribute="normal" lineEndContext="#pop"  >
        <DetectChar   char='#'                   attribute="comment"  context="comment" firstNonSpace="true" />

        <IncludeRules context="function_check" />

        <DetectChar   char='@'                   attribute="function" context="procedure_name" firstNonSpace="true" />
        <RegExpr    String="&B;call&B;"           attribute="keyword"  context="procedure_name" firstNonSpace="true" />

        <RegExpr    String="&B;if&B;"             attribute="keyword"  beginRegion="if" />
        <RegExpr    String="&B;endif&B;"          attribute="keyword"    endRegion="if" firstNonSpace="true" />
        <RegExpr    String="&B;fi&B;"             attribute="keyword"    endRegion="if" />

        <RegExpr    String="&B;for&B;"            attribute="keyword"  beginRegion="for" />
        <RegExpr    String="&B;endfor&B;"         attribute="keyword"    endRegion="for" />

        <RegExpr    String="&B;while&B;"          attribute="keyword"  beginRegion="while" />
        <RegExpr    String="&B;endwhile&B;"       attribute="keyword"    endRegion="while" />

        <RegExpr    String="&B;repeat&B;"         attribute="keyword"  beginRegion="repeat" />
        <RegExpr    String="&B;until&B;"          attribute="keyword"    endRegion="repeat" />

        <RegExpr    String="&B;procedure&B;"      attribute="keyword"  context="procedure_name" beginRegion="procedure" />
        <RegExpr    String="&B;endproc&B;"        attribute="keyword"                             endRegion="procedure" />

        <keyword    String="keywords"            attribute="keyword" />

        <RegExpr    String="&B;printline&B;"      attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;print&B;"          attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;printtab&B;"       attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;echo&B;"           attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;exit&B;"           attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;asserterror&B;"    attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;pause&B;"          attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;sendpraat&B;"      attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;sendsocket&B;"     attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;include&B;"        attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;execute&B;"        attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;system&B;"         attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;system_nocheck&B;" attribute="keyword"  context="string_unquoted" />
        <RegExpr    String="&B;editor&B;"         attribute="keyword"  context="string_unquoted" beginRegion="editor" />
        <RegExpr    String="&B;endeditor&B;"      attribute="keyword"                              endRegion="editor" />

        <RegExpr    String="&B;form&B;"           attribute="keyword"  context="old_form_definition" firstNonSpace="true" beginRegion="form" />

        <RegExpr    String="&B;goto&B;"           attribute="keyword"  context="label" />
        <RegExpr    String="&B;label&B;"          attribute="keyword"  context="label" />

        <DetectChar   char='"'                attribute="string"   context="string_quoted" />
        <IncludeRules context="expansion" />

        <IncludeRules context="operator" />
        <IncludeRules context="variable_name" />
        <IncludeRules context="number" />

        <RegExpr    String="\b[A-Z]" attribute="command" context="command" />

        <DetectChar   char=';' attribute="comment"  context="comment"        />
      </context>

      <context name="label" attribute="variable" lineEndContext="#pop" />

      <context name="old_form_definition" attribute="string" lineEndContext="#pop!old_form" />

      <context name="old_form" attribute="normal" lineEndContext="#stay">
        <RegExpr String="&B;optionmenu&B;" attribute="keyword" context="form-optionmenu-variable" />
        <RegExpr String="&B;option&B;"     attribute="keyword" context="string_unquoted" />
        <RegExpr String="&B;button&B;"     attribute="keyword" context="string_unquoted" />

        <RegExpr String="&B;sentence&B;"   attribute="keyword" context="form-string-variable" />
        <RegExpr String="&B;text&B;"       attribute="keyword" context="form-string-variable" />

        <RegExpr String="&B;word&B;"       attribute="keyword" context="form-word-variable" />

        <RegExpr String="&B;comment&B;"    attribute="keyword" context="string_unquoted" />

        <RegExpr String="&B;real&B;"       attribute="keyword" context="number" />
        <RegExpr String="&B;natural&B;"    attribute="keyword" context="number" />
        <RegExpr String="&B;positive&B;"   attribute="keyword" context="number" />
        <RegExpr String="&B;integer&B;"    attribute="keyword" context="number" />

        <RegExpr String="&B;boolean&B;"    attribute="keyword" context="form-boolean-variable" />

        <RegExpr String="&B;endform&B;"    attribute="keyword" context="#pop" endRegion="form" />
      </context>

      <context name="operator" attribute="operator" lineEndContext="#pop" >
        <StringDetect String="+="         attribute="operator" />
        <StringDetect String="-="         attribute="operator" />
        <StringDetect String="/="         attribute="operator" />
        <StringDetect String="*="         attribute="operator" />
        <StringDetect String="=="         attribute="operator" />
        <StringDetect String="!="         attribute="operator" />
        <StringDetect String="&gt;="      attribute="operator" />
        <StringDetect String="&lt;&gt;"   attribute="operator" />
        <StringDetect String="&amp;&amp;" attribute="operator" />
        <StringDetect String="||"         attribute="operator" />
        <StringDetect String="**"         attribute="operator" />

        <StringDetect String="+"          attribute="operator" />
        <StringDetect String="-"          attribute="operator" />
        <StringDetect String="/"          attribute="operator" />
        <StringDetect String="*"          attribute="operator" />
        <StringDetect String="="          attribute="operator" />
        <StringDetect String="!"          attribute="operator" />
        <StringDetect String="&gt;"       attribute="operator" />
        <StringDetect String="&lt;"       attribute="operator" />
        <StringDetect String="|"          attribute="operator" />
        <StringDetect String="&amp;"      attribute="operator" />
        <StringDetect String="^"          attribute="operator" />

        <RegExpr String="&B;and&B;"        attribute="operator" />
        <RegExpr String="&B;or&B;"         attribute="operator" />
        <RegExpr String="&B;not&B;"        attribute="operator" />
        <RegExpr String="&B;div&B;"        attribute="operator" />
        <RegExpr String="&B;mod&B;"        attribute="operator" />
      </context>

      <context name="command" attribute="command" lineEndContext="#pop" >
        <IncludeRules context="expansion" />
        <StringDetect String="..." attribute="command" context="old_arguments" />
        <DetectChar     char=":"   attribute="command" context="#pop" />
      </context>

      <context name="old_arguments" attribute="normal" lineEndContext="#pop#pop" >
        <IncludeRules context="variable_name" />
        <IncludeRules context="operator" />
        <IncludeRules context="number" />
        <DetectChar char='"' attribute="string" context="string_quoted" />
      </context>

      <context name="variable_name" attribute="normal" lineEndContext="#pop" >
        <IncludeRules context="operator" />
        <IncludeRules context="number" />
        <keyword String="variables_numeric" attribute="variable"  />
        <keyword String="variables_string"  attribute="variable" />

        <RegExpr String="\b[A-Z][a-zA-Z]+_" attribute="object.attribute" context="object_attributes" />

      </context>

      <context name="object_attributes" attribute="object.attribute" lineEndContext="#pop#pop" >
        <DetectChar char="." attribute="object.attribute" context="#pop#pop!attribute_names" />

        <IncludeRules context="expansion" />

        <DetectChar char="$" attribute="object.attribute" />
        <DetectChar char="[" attribute="normal"           context="#pop#pop" />
      </context>

      <context name="attribute_names" attribute="normal" lineEndContext="#pop" >
        <RegExpr String="&B;ncol&B;" attribute="object.attribute" context="#pop" />
        <RegExpr String="&B;nrow&B;" attribute="object.attribute" context="#pop" />
        <RegExpr String="&B;xmin&B;" attribute="object.attribute" context="#pop" />
        <RegExpr String="&B;ymin&B;" attribute="object.attribute" context="#pop" />
        <RegExpr String="&B;xmax&B;" attribute="object.attribute" context="#pop" />
        <RegExpr String="&B;ymax&B;" attribute="object.attribute" context="#pop" />
        <RegExpr String="&B;nx&B;"   attribute="object.attribute" context="#pop" />
        <RegExpr String="&B;ny&B;"   attribute="object.attribute" context="#pop" />
        <RegExpr String="&B;dx&B;"   attribute="object.attribute" context="#pop" />
        <RegExpr String="&B;dy&B;"   attribute="object.attribute" context="#pop" />
      </context>

      <context name="form-optionmenu-variable" attribute="normal" lineEndContext="#pop" >
        <DetectChar char=":" attribute="normal" context="form-optionmenu-default" />
      </context>

      <context name="form-optionmenu-default" attribute="normal" lineEndContext="#pop" >
        <IncludeRules context="number" />
      </context>

      <context name="form-boolean-variable" attribute="normal" lineEndContext="#pop" >
        <RegExpr String="\b\w+\b" attribute="normal" context="form-boolean-value" />
      </context>

      <context name="form-boolean-value" attribute="variable" lineEndContext="#pop" >
      </context>

      <context name="number" attribute="normal" lineEndContext="#pop" >
        <IncludeRules context="operator" />
        <RegExpr String="\b\d+(\.\d*)?([eE][-+]?\d+)?%?" attribute="number" />
      </context>

      <context name="form-word-variable" attribute="normal" lineEndContext="#pop" >
        <RegExpr String="\b\w+\b" attribute="normal" context="form-word-string" />
      </context>

      <context name="form-string-variable" attribute="normal" lineEndContext="#pop" >
        <RegExpr String="\b\w+\b" attribute="normal" context="string_unquoted" />
      </context>

      <context name="form-word-string" attribute="string" lineEndContext="#pop" >
        <RegExpr String="\b\w+\b" attribute="string" context="ignore" />
      </context>

      <context name="ignore" attribute="normal" lineEndContext="#pop" />

      <context name="comment" attribute="comment" lineEndContext="#pop" />

      <context name="string_quoted" attribute="string" lineEndContext="line_continuation_check" >
        <IncludeRules context="expansion" />
        <DetectChar   char='"' attribute="string"    context="#pop" />
      </context>

      <context name="string_unquoted" attribute="string" lineEndContext="line_continuation_check" >
        <IncludeRules context="expansion" />
      </context>

      <context name="expansion" attribute="normal" lineEndContext="#pop" >
        <RangeDetect attribute="expansion" char="'" char1="'" />
      </context>

      <context name="line_continuation_check" attribute="string" lineEndContext="#stay" >
        <StringDetect String="..."     attribute="normal" context="#pop"     firstNonSpace="true" />
        <StringDetect String=".."                         context="#pop#pop" firstNonSpace="true" lookAhead="true" />
        <StringDetect String="."                          context="#pop#pop" firstNonSpace="true" lookAhead="true" />
        <RegExpr      String="[\w\d#@;]"                  context="#pop#pop" firstNonSpace="true" lookAhead="true" />
      </context>

      <context name="function_check" attribute="normal" lineEndContext="#pop" >
        <keyword String="functions_numeric" attribute="normal" context="function-numeric-check" lookAhead="true" />
        <keyword String="functions_string"  attribute="normal" context="function-string-check"  lookAhead="true" />
        <keyword String="functions_array"   attribute="normal" context="function-array-check"   lookAhead="true" />
      </context>

      <context name="function-array-check" attribute="normal" lineEndContext="#pop" >
        <RegExpr    String="[a-zA-Z0-9_]+# *[:(]" attribute="normal" context="function_call" lookAhead="true" />
        <DetectChar   char=" "                                       context="#pop#pop" />
      </context>

      <context name="function-string-check" attribute="normal" lineEndContext="#pop" >
        <RegExpr    String="[a-zA-Z0-9_]+\$ *[:(]" attribute="normal" context="function_call" lookAhead="true" />
        <DetectChar   char=" "                                        context="#pop#pop" />
      </context>

      <context name="function-numeric-check" attribute="normal" lineEndContext="#pop" >
        <RegExpr    String="[a-zA-Z0-9_]+ *[:(]" attribute="normal"  context="function_call"            lookAhead="true" />
        <RegExpr    String="&B;editor&B;"        attribute="keyword" context="#pop#pop!string_unquoted" beginRegion="editor" />
        <DetectChar char=" "                                         context="#pop#pop" />
      </context>

      <context name="function_call" attribute="function" lineEndContext="#pop" >
        <RegExpr String="&B;beginSendPraat&B;" beginRegion="sendpraat" />
        <RegExpr String="&B;endSendPraat&B;"     endRegion="sendpraat" />

        <RegExpr String="&B;beginPause&B;"     beginRegion="pause" />
        <RegExpr String="&B;endPause&B;"         endRegion="pause" />

        <DetectChar   char=":" attribute="normal" context="#pop#pop#pop" />
        <DetectChar   char="(" attribute="normal" context="#pop#pop#pop" />
      </context>

      <context name="procedure_name" attribute="function" lineEndContext="#pop" >
        <DetectSpaces          attribute="normal" context="#pop" />
        <DetectChar   char=":" attribute="normal" context="#pop" />
        <DetectChar   char="(" attribute="normal" context="#pop" />
      </context>

    </contexts>
    <itemDatas>
      <itemData name="normal"           defStyleNum="dsNormal" />
      <itemData name="number"           defStyleNum="dsDecVal" />
      <itemData name="object.attribute" defStyleNum="dsDecVal" />
      <itemData name="variable"         defStyleNum="dsDataType" />
      <itemData name="keyword"          defStyleNum="dsKeyword" />
      <itemData name="expansion"        defStyleNum="dsSpecialString" />
      <itemData name="string"           defStyleNum="dsString" />
      <itemData name="command"          defStyleNum="dsFunction" />
      <itemData name="function"         defStyleNum="dsFunction" />
      <itemData name="operator"         defStyleNum="dsOperator" />
      <itemData name="comment"          defStyleNum="dsComment" />
    </itemDatas>
  </highlighting>
  <general>
    <comments>
      <comment name="singleLine" start="#" />
    </comments>
    <keywords casesensitive="true" weakDeliminator="_#$" />
  </general>
</language>
